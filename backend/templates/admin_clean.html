<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êô∫Êä§Á´•Ë°å - ÁÆ°ÁêÜÂêéÂè∞</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body class="bg-gray-50">
    <div id="admin-app">
        <!-- ÁôªÂΩïÁïåÈù¢ -->
        <div v-if="!isLoggedIn" class="min-h-screen flex items-center justify-center">
            <div class="max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-gray-900">Êô∫Êä§Á´•Ë°åÁÆ°ÁêÜÂêéÂè∞</h2>
                    <p class="mt-2 text-gray-600">ËØ∑ÁôªÂΩï‰ª•ÁÆ°ÁêÜÂÜÖÂÆπ</p>
                </div>
                <form @submit.prevent="login" class="space-y-6">
                    <div>
                        <input v-model="loginForm.username" type="text" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="Áî®Êà∑Âêç">
                    </div>
                    <div>
                        <input v-model="loginForm.password" type="password" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               placeholder="ÂØÜÁ†Å">
                    </div>
                    <div class="flex items-center">
                        <input v-model="loginForm.remember" id="remember" type="checkbox" class="mr-2">
                        <label for="remember" class="text-sm text-gray-600">ËÆ∞‰ΩèÊàë</label>
                    </div>
                    <div class="space-y-3">
                        <button type="submit" :disabled="loading"
                                class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50">
                            <span v-if="loading">ÁôªÂΩï‰∏≠...</span>
                            <span v-else>ÁôªÂΩï</span>
                        </button>
                        <button type="button" @click="quickLogin" :disabled="loading"
                                class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 disabled:opacity-50">
                            Âø´ÈÄüÁôªÂΩï (ÊµãËØï)
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ÁÆ°ÁêÜÁïåÈù¢ -->
        <div v-else class="min-h-screen bg-gray-50">
            <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
            <nav class="bg-white shadow-sm border-b">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16">
                        <div class="flex items-center">
                            <h1 class="text-xl font-semibold text-gray-900">Êô∫Êä§Á´•Ë°å - ÂÜÖÂÆπÁÆ°ÁêÜÂêéÂè∞</h1>
                        </div>
                        <div class="flex items-center space-x-4">
                            <span class="text-sm text-gray-500">
                                Ê¨¢ËøéÔºå{% if currentUser %}{{ currentUser.username }}{% else %}{{ 'ÁÆ°ÁêÜÂëò' }}{% endif %}
                            </span>
                            <button @click="logout" class="text-sm text-red-600 hover:text-red-800">ÈÄÄÂá∫ÁôªÂΩï</button>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- ‰∏ªË¶ÅÂÜÖÂÆπ -->
            <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
                <div class="flex">
                    <!-- Â∑¶‰æßÂØºËà™ -->
                    <div class="w-64 bg-white rounded-lg shadow-sm p-4 mr-6">
                        <nav class="space-y-2">
                            <button v-for="tab in sidebarTabs" :key="tab.id"
                                    @click="activeTab = tab.id"
                                    :class="[
                                        'w-full text-left px-3 py-2 rounded-md text-sm font-medium',
                                        activeTab === tab.id
                                            ? 'bg-blue-100 text-blue-700'
                                            : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'
                                    ]">
                                <span v-text="tab.name"></span>
                            </button>
                        </nav>
                    </div>

                    <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
                    <div class="flex-1">
                        <!-- È¶ñÈ°µÂ±ïÈ¶ÜÁÆ°ÁêÜ -->
                        <div v-if="activeTab === 'homepage'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">È¶ñÈ°µÂ±ïÈ¶ÜÁÆ°ÁêÜ</h3>
                            <div class="space-y-6">
                                <div v-for="hall in homepageHalls" :key="hall.id" class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <h4 class="font-medium text-gray-900" v-text="hall.name"></h4>
                                        <button @click="saveHallContent(hall.id)" 
                                                class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                                            ‰øùÂ≠ò
                                        </button>
                                    </div>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Ê†áÈ¢ò</label>
                                            <input v-model="hall.name" 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                   placeholder="ËæìÂÖ•Â±ïÈ¶ÜÊ†áÈ¢ò">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊèèËø∞</label>
                                            <textarea v-model="hall.desc" rows="3"
                                                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                      placeholder="ËæìÂÖ•Â±ïÈ¶ÜÊèèËø∞"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂõæÊ†á</label>
                                            <input type="file" @change="uploadHallIcon($event, hall.id)" 
                                                   accept="image/*" class="w-full text-sm">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Áü•ËØÜÂ≠¶‰π†Ê®°ÂùóÁÆ°ÁêÜ -->
                        <div v-else-if="activeTab === 'knowledge'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Áü•ËØÜÂ≠¶‰π†Ê®°ÂùóÁÆ°ÁêÜ</h3>
                            
                            <!-- Áü•ËØÜÂàÜÁ±ªÈÄâÊã© -->
                            <div class="mb-6">
                                <div class="flex space-x-2">
                                    <button v-for="category in knowledgeCategories" :key="category.id"
                                            @click="knowledgeActiveTab = category.id"
                                            :class="[
                                                'px-4 py-2 rounded-md text-sm font-medium',
                                                knowledgeActiveTab === category.id
                                                    ? 'bg-blue-100 text-blue-700'
                                                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                            ]">
                                        <span v-text="category.name"></span>
                                    </button>
                                </div>
                            </div>

                            <!-- ÊñáÁ´†ÁÆ°ÁêÜ -->
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <h4 class="font-medium text-gray-900">ÊñáÁ´†ÁÆ°ÁêÜ</h4>
                                    <button @click="showAddArticleForm = true" 
                                            class="bg-green-500 text-white px-4 py-2 rounded-md text-sm hover:bg-green-600">
                                        Ê∑ªÂä†ÊñáÁ´†
                                    </button>
                                </div>

                                <!-- Ê∑ªÂä†ÊñáÁ´†Ë°®Âçï -->
                                <div v-if="showAddArticleForm" class="border rounded-lg p-4 bg-gray-50">
                                    <h5 class="font-medium mb-3">Ê∑ªÂä†Êñ∞ÊñáÁ´†</h5>
                                    <div class="space-y-3">
                                        <input v-model="newArticle.title" 
                                               class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                               placeholder="ÊñáÁ´†Ê†áÈ¢ò">
                                        <textarea v-model="newArticle.content" rows="4"
                                                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                                  placeholder="ÊñáÁ´†ÂÜÖÂÆπ"></textarea>
                                        <div class="flex space-x-2">
                                            <button @click="addArticle" 
                                                    class="bg-blue-500 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600">
                                                ‰øùÂ≠òÊñáÁ´†
                                            </button>
                                            <button @click="showAddArticleForm = false" 
                                                    class="bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-400">
                                                ÂèñÊ∂à
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ÊñáÁ´†ÂàóË°® -->
                                <div class="space-y-3">
                                    <div v-for="article in getKnowledgeArticles(knowledgeActiveTab)" :key="article.id" 
                                         class="border rounded-lg p-4">
                                        <div class="flex justify-between items-start">
                                            <div class="flex-1">
                                                <h5 class="font-medium text-gray-900" v-text="article.title"></h5>
                                                <p class="text-sm text-gray-500 mt-1" v-text="article.content.substring(0, 100) + '...'"></p>
                                            </div>
                                            <div class="flex space-x-2">
                                                <button @click="editArticle(article)" 
                                                        class="text-blue-600 hover:text-blue-800 text-sm">
                                                    ÁºñËæë
                                                </button>
                                                <button @click="deleteArticle(article.id)" 
                                                        class="text-red-600 hover:text-red-800 text-sm">
                                                    Âà†Èô§
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ‰ΩìÈ™å‰∫íÂä®Ê∏∏ÊàèÁÆ°ÁêÜ -->
                        <div v-else-if="activeTab === 'games'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">‰ΩìÈ™å‰∫íÂä®Ê∏∏ÊàèÁÆ°ÁêÜ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div v-for="game in games" :key="game.id" class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <h4 class="font-medium text-gray-900" v-text="game.name"></h4>
                                        <button @click="saveGameContent(game.id)" 
                                                class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                                            ‰øùÂ≠ò
                                        </button>
                                    </div>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Ê∏∏ÊàèÊ†áÈ¢ò</label>
                                            <input v-model="game.title" 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Ê∏∏ÊàèÊèèËø∞</label>
                                            <textarea v-model="game.description" rows="3"
                                                      class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Ê∏∏ÊàèÂõæÁâá</label>
                                            <input type="file" @change="uploadGameImage($event, game.id)" 
                                                   accept="image/*" class="w-full text-sm">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÊîØÊåÅ‰∏éÂí®ËØ¢ÁÆ°ÁêÜ -->
                        <div v-else-if="activeTab === 'support'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">ÊîØÊåÅ‰∏éÂí®ËØ¢ÁÆ°ÁêÜ</h3>
                            <div class="space-y-6">
                                <div class="border rounded-lg p-4">
                                    <h4 class="font-medium text-gray-900 mb-3">‰∏ìÂÆ∂Âí®ËØ¢ËÆæÁΩÆ</h4>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Âí®ËØ¢ËØ¥Êòé</label>
                                            <textarea v-model="supportContent.consultation" rows="4"
                                                      class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                                      placeholder="ËæìÂÖ•‰∏ìÂÆ∂Âí®ËØ¢ËØ¥Êòé"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">ËÅîÁ≥ªÊñπÂºè</label>
                                            <input v-model="supportContent.contact" 
                                                   class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                                   placeholder="ËæìÂÖ•ËÅîÁ≥ªÊñπÂºè">
                                        </div>
                                        <button @click="saveSupportContent" 
                                                class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                                            ‰øùÂ≠òËÆæÁΩÆ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ‰∏ì‰∏öÂüπËÆ≠ËØæÁ®ãÁÆ°ÁêÜ -->
                        <div v-else-if="activeTab === 'training'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">‰∏ì‰∏öÂüπËÆ≠ËØæÁ®ãÁÆ°ÁêÜ</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <h4 class="font-medium text-gray-900">ËØæÁ®ãÁÆ°ÁêÜ</h4>
                                    <button @click="showAddCourseForm = true" 
                                            class="bg-green-500 text-white px-4 py-2 rounded-md text-sm hover:bg-green-600">
                                        Ê∑ªÂä†ËØæÁ®ã
                                    </button>
                                </div>

                                <!-- Ê∑ªÂä†ËØæÁ®ãË°®Âçï -->
                                <div v-if="showAddCourseForm" class="border rounded-lg p-4 bg-gray-50">
                                    <h5 class="font-medium mb-3">Ê∑ªÂä†Êñ∞ËØæÁ®ã</h5>
                                    <div class="space-y-3">
                                        <input v-model="newCourse.title" 
                                               class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                               placeholder="ËØæÁ®ãÊ†áÈ¢ò">
                                        <textarea v-model="newCourse.description" rows="3"
                                                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                                                  placeholder="ËØæÁ®ãÊèèËø∞"></textarea>
                                        <input type="file" @change="selectCourseVideo" 
                                               accept="video/*" class="w-full text-sm">
                                        <div class="flex space-x-2">
                                            <button @click="addCourse" 
                                                    class="bg-blue-500 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600">
                                                ‰øùÂ≠òËØæÁ®ã
                                            </button>
                                            <button @click="showAddCourseForm = false" 
                                                    class="bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-400">
                                                ÂèñÊ∂à
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ËØæÁ®ãÂàóË°® -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div v-for="course in courses" :key="course.id" class="border rounded-lg p-4">
                                        <h5 class="font-medium text-gray-900" v-text="course.title"></h5>
                                        <p class="text-sm text-gray-500 mt-1" v-text="course.description"></p>
                                        <div class="mt-3 flex space-x-2">
                                            <button @click="editCourse(course)" 
                                                    class="text-blue-600 hover:text-blue-800 text-sm">
                                                ÁºñËæë
                                            </button>
                                            <button @click="deleteCourse(course.id)" 
                                                    class="text-red-600 hover:text-red-800 text-sm">
                                                Âà†Èô§
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Â™í‰ΩìËµÑÊ∫êÁÆ°ÁêÜ -->
                        <div v-else-if="activeTab === 'media'" class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Â™í‰ΩìËµÑÊ∫êÁÆ°ÁêÜ</h3>
                            <div class="space-y-6">
                                <!-- ÂõæÁâá‰∏ä‰º† -->
                                <div class="border rounded-lg p-4">
                                    <h4 class="font-medium text-gray-900 mb-3">ÂõæÁâá‰∏ä‰º†</h4>
                                    <div class="space-y-3">
                                        <input type="file" @change="selectImages" 
                                               accept="image/*" multiple class="w-full text-sm">
                                        <button @click="uploadImages" 
                                                class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                                            ‰∏ä‰º†ÂõæÁâá
                                        </button>
                                    </div>
                                </div>

                                <!-- ËßÜÈ¢ë‰∏ä‰º† -->
                                <div class="border rounded-lg p-4">
                                    <h4 class="font-medium text-gray-900 mb-3">ËßÜÈ¢ë‰∏ä‰º†</h4>
                                    <div class="space-y-3">
                                        <input type="file" @change="selectVideos" 
                                               accept="video/*" multiple class="w-full text-sm">
                                        <button @click="uploadVideos" 
                                                class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                                            ‰∏ä‰º†ËßÜÈ¢ë
                                        </button>
                                    </div>
                                </div>

                                <!-- Â™í‰ΩìÊñá‰ª∂ÂàóË°® -->
                                <div class="border rounded-lg p-4">
                                    <h4 class="font-medium text-gray-900 mb-3">Â∑≤‰∏ä‰º†Êñá‰ª∂</h4>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div v-for="file in mediaFiles" :key="file.id" class="border rounded p-2">
                                            <div class="aspect-square bg-gray-100 rounded mb-2 flex items-center justify-center">
                                                <img v-if="file.type === 'image'" :src="file.url" :alt="file.name" class="max-w-full max-h-full object-cover">
                                                <div v-else class="text-gray-500 text-xs text-center" v-text="file.name"></div>
                                            </div>
                                            <p class="text-xs text-gray-600 truncate" v-text="file.name"></p>
                                            <button @click="deleteMediaFile(file.id)" 
                                                    class="text-red-500 hover:text-red-700 text-xs mt-1">
                                                Âà†Èô§
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, reactive, onMounted } = Vue;
        
        // ÈÖçÁΩÆaxiosÁöÑCSRF token
        const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
        axios.defaults.headers.common['X-CSRFToken'] = csrfToken;
        axios.defaults.headers.post['X-CSRFToken'] = csrfToken;

        createApp({
            setup() {
                const isLoggedIn = ref(false);
                const loading = ref(false);
                const username = ref('');
                const activeTab = ref('homepage');
                
                const loginForm = reactive({
                    username: '',
                    password: '',
                    remember: false
                });

                const sidebarTabs = [
                    { id: 'homepage', name: 'üè† È¶ñÈ°µÂ±ïÈ¶Ü' },
                    { id: 'knowledge', name: 'üìö Áü•ËØÜÂ≠¶‰π†Ê®°Âùó' },
                    { id: 'games', name: 'üéÆ ‰ΩìÈ™å‰∫íÂä®Ê∏∏Êàè' },
                    { id: 'support', name: 'üí¨ ÊîØÊåÅ‰∏éÂí®ËØ¢' },
                    { id: 'training', name: 'üéì ‰∏ì‰∏öÂüπËÆ≠ËØæÁ®ã' },
                    { id: 'media', name: 'üìÅ Â™í‰ΩìËµÑÊ∫êÁÆ°ÁêÜ' }
                ];

                // ÂÜÖÂÆπÊï∞ÊçÆ
                const knowledgeActiveTab = ref('life_care');
                const showAddArticleForm = ref(false);
                const showAddCourseForm = ref(false);

                // È¶ñÈ°µÂ±ïÈ¶ÜÊï∞ÊçÆ
                const homepageHalls = reactive([
                    { id: 1, name: 'Ëá™ÊàëËØÑ‰º∞Á≥ªÁªü', desc: 'Â∏ÆÂä©ÂÆ∂Èïø‰∫ÜËß£ÂÑøÁ´•ÂèëÂ±ïÁä∂ÂÜµ' },
                    { id: 2, name: 'Áü•ËØÜÂ≠¶‰π†Ê®°Âùó', desc: 'Êèê‰æõ‰∏ì‰∏öÁöÑÂÑøÁ´•ÂèëÂ±ïÁü•ËØÜ' },
                    { id: 3, name: '‰ΩìÈ™å‰∫íÂä®Ê∏∏Êàè', desc: 'ÈÄöËøáÊ∏∏ÊàèÂ≠¶‰π†ÂÑøÁ´•Êä§ÁêÜÁü•ËØÜ' },
                    { id: 4, name: 'ÊîØÊåÅ‰∏éÂí®ËØ¢', desc: '‰∏ìÂÆ∂Âí®ËØ¢ÂíåÁ§æÂå∫ÊîØÊåÅÊúçÂä°' },
                    { id: 5, name: '‰∏ì‰∏öÂüπËÆ≠ËØæÁ®ã', desc: '‰∏ì‰∏öÁöÑÂÑøÁ´•Êä§ÁêÜÂüπËÆ≠ËØæÁ®ã' }
                ]);

                // Áü•ËØÜÂàÜÁ±ªÊï∞ÊçÆ
                const knowledgeCategories = [
                    { id: 'life_care', name: 'ÁîüÊ¥ªÁÖßÊä§' },
                    { id: 'psychology', name: 'ÂøÉÁêÜÂèëÂ±ï' },
                    { id: 'safety', name: 'ÂÆâÂÖ®Èò≤Êä§' },
                    { id: 'education', name: 'ÊïôËÇ≤ÂºïÂØº' }
                ];

                // ÊñáÁ´†Êï∞ÊçÆ
                const articles = reactive([]);
                const newArticle = reactive({ title: '', content: '', category: 'life_care' });

                // Ê∏∏ÊàèÊï∞ÊçÆ
                const games = reactive([
                    { id: 1, name: 'Êó•Â∏∏Êä§ÁêÜÊ∏∏Êàè', title: 'Êó•Â∏∏Êä§ÁêÜÊ∏∏Êàè', description: 'Â≠¶‰π†Êó•Â∏∏Êä§ÁêÜÊäÄËÉΩ' },
                    { id: 2, name: 'ÂÆâÂÖ®Áü•ËØÜÊ∏∏Êàè', title: 'ÂÆâÂÖ®Áü•ËØÜÊ∏∏Êàè', description: 'Â≠¶‰π†ÂÆâÂÖ®Èò≤Êä§Áü•ËØÜ' },
                    { id: 3, name: 'ÊÉÖÁª™ÁÆ°ÁêÜÊ∏∏Êàè', title: 'ÊÉÖÁª™ÁÆ°ÁêÜÊ∏∏Êàè', description: 'Â≠¶‰π†ÊÉÖÁª™Ë∞ÉËäÇÊäÄÂ∑ß' },
                    { id: 4, name: 'Á§æ‰∫§ÊäÄËÉΩÊ∏∏Êàè', title: 'Á§æ‰∫§ÊäÄËÉΩÊ∏∏Êàè', description: 'ÊèêÈ´òÁ§æ‰∫§‰∫§ÊµÅËÉΩÂäõ' }
                ]);

                // ÊîØÊåÅÂÜÖÂÆπÊï∞ÊçÆ
                const supportContent = reactive({
                    consultation: 'Êèê‰æõ‰∏ì‰∏öÁöÑÂÑøÁ´•ÂèëÂ±ïÂí®ËØ¢ÊúçÂä°',
                    contact: 'ËÅîÁ≥ªÁîµËØùÔºö400-123-4567'
                });

                // ËØæÁ®ãÊï∞ÊçÆ
                const courses = reactive([]);
                const newCourse = reactive({ title: '', description: '', video: null });

                // Â™í‰ΩìÊñá‰ª∂Êï∞ÊçÆ
                const mediaFiles = reactive([]);
                const selectedImages = ref([]);
                const selectedVideos = ref([]);

                // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ
                const checkLoginStatus = async () => {
                    try {
                        const response = await axios.get('/api/admin/check');
                        if (response.data.success && response.data.logged_in) {
                            isLoggedIn.value = true;
                            username.value = response.data.username;
                        }
                    } catch (error) {
                        console.error('Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÂ§±Ë¥•:', error);
                    }
                };

                // ÁôªÂΩï
                const login = async () => {
                    loading.value = true;
                    try {
                        const response = await axios.post('/api/admin/login', loginForm);
                        if (response.data.success) {
                            isLoggedIn.value = true;
                            username.value = loginForm.username;
                            loginForm.username = '';
                            loginForm.password = '';
                            loginForm.remember = false;
                        } else {
                            alert(response.data.error || 'ÁôªÂΩïÂ§±Ë¥•');
                        }
                    } catch (error) {
                        alert('ÁôªÂΩïÂ§±Ë¥•: ' + (error.response?.data?.error || 'ÁΩëÁªúÈîôËØØ'));
                    } finally {
                        loading.value = false;
                    }
                };
                
                // Âø´ÈÄüÁôªÂΩïÔºàÊµãËØïÈò∂ÊÆµÔºâ
                const quickLogin = async () => {
                    loginForm.username = 'admin';
                    loginForm.password = 'admin123';
                    await new Promise(resolve => setTimeout(resolve, 500));
                    await login();
                };

                // ÁôªÂá∫
                const logout = async () => {
                    try {
                        await axios.post('/api/admin/logout');
                        isLoggedIn.value = false;
                        username.value = '';
                    } catch (error) {
                        console.error('ÁôªÂá∫Â§±Ë¥•:', error);
                    }
                };

                // ÂÜÖÂÆπÁÆ°ÁêÜÊñπÊ≥ï
                const saveHallContent = async (hallId) => {
                    const hall = homepageHalls.find(h => h.id === hallId);
                    if (hall) {
                        alert(`Â±ïÈ¶Ü "${hall.name}" ÂÜÖÂÆπÂ∑≤‰øùÂ≠òÔºÅ`);
                        // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂÆûÈôÖÁöÑAPIË∞ÉÁî®
                    }
                };

                const uploadHallIcon = (event, hallId) => {
                    const file = event.target.files[0];
                    if (file) {
                        alert(`Â±ïÈ¶ÜÂõæÊ†á‰∏ä‰º†ÊàêÂäüÔºÅ`);
                        // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂÆûÈôÖÁöÑÊñá‰ª∂‰∏ä‰º†ÈÄªËæë
                    }
                };

                const getKnowledgeArticles = (category) => {
                    return articles.filter(article => article.category === category);
                };

                const addArticle = () => {
                    if (newArticle.title && newArticle.content) {
                        const article = {
                            id: Date.now(),
                            title: newArticle.title,
                            content: newArticle.content,
                            category: knowledgeActiveTab.value
                        };
                        articles.push(article);
                        newArticle.title = '';
                        newArticle.content = '';
                        showAddArticleForm.value = false;
                        alert('ÊñáÁ´†Ê∑ªÂä†ÊàêÂäüÔºÅ');
                    }
                };

                const editArticle = (article) => {
                    newArticle.title = article.title;
                    newArticle.content = article.content;
                    showAddArticleForm.value = true;
                    // Âà†Èô§ÂéüÊñáÁ´†ÔºåÁ≠âÂæÖÁî®Êà∑‰øùÂ≠òÊñ∞ÁöÑ
                    const index = articles.findIndex(a => a.id === article.id);
                    if (index > -1) {
                        articles.splice(index, 1);
                    }
                };

                const deleteArticle = (articleId) => {
                    if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÁØáÊñáÁ´†ÂêóÔºü')) {
                        const index = articles.findIndex(a => a.id === articleId);
                        if (index > -1) {
                            articles.splice(index, 1);
                            alert('ÊñáÁ´†Âà†Èô§ÊàêÂäüÔºÅ');
                        }
                    }
                };

                const saveGameContent = (gameId) => {
                    const game = games.find(g => g.id === gameId);
                    if (game) {
                        alert(`Ê∏∏Êàè "${game.name}" ÂÜÖÂÆπÂ∑≤‰øùÂ≠òÔºÅ`);
                    }
                };

                const uploadGameImage = (event, gameId) => {
                    const file = event.target.files[0];
                    if (file) {
                        alert('Ê∏∏ÊàèÂõæÁâá‰∏ä‰º†ÊàêÂäüÔºÅ');
                    }
                };

                const saveSupportContent = () => {
                    alert('ÊîØÊåÅ‰∏éÂí®ËØ¢ÂÜÖÂÆπÂ∑≤‰øùÂ≠òÔºÅ');
                };

                const addCourse = () => {
                    if (newCourse.title && newCourse.description) {
                        const course = {
                            id: Date.now(),
                            title: newCourse.title,
                            description: newCourse.description,
                            video: newCourse.video
                        };
                        courses.push(course);
                        newCourse.title = '';
                        newCourse.description = '';
                        newCourse.video = null;
                        showAddCourseForm.value = false;
                        alert('ËØæÁ®ãÊ∑ªÂä†ÊàêÂäüÔºÅ');
                    }
                };

                const editCourse = (course) => {
                    newCourse.title = course.title;
                    newCourse.description = course.description;
                    showAddCourseForm.value = true;
                    const index = courses.findIndex(c => c.id === course.id);
                    if (index > -1) {
                        courses.splice(index, 1);
                    }
                };

                const deleteCourse = (courseId) => {
                    if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ËØæÁ®ãÂêóÔºü')) {
                        const index = courses.findIndex(c => c.id === courseId);
                        if (index > -1) {
                            courses.splice(index, 1);
                            alert('ËØæÁ®ãÂà†Èô§ÊàêÂäüÔºÅ');
                        }
                    }
                };

                const selectCourseVideo = (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        newCourse.video = file;
                    }
                };

                const selectImages = (event) => {
                    selectedImages.value = Array.from(event.target.files);
                };

                const selectVideos = (event) => {
                    selectedVideos.value = Array.from(event.target.files);
                };

                const uploadImages = () => {
                    if (selectedImages.value.length > 0) {
                        selectedImages.value.forEach(file => {
                            const mediaFile = {
                                id: Date.now() + Math.random(),
                                name: file.name,
                                type: 'image',
                                url: URL.createObjectURL(file)
                            };
                            mediaFiles.push(mediaFile);
                        });
                        selectedImages.value = [];
                        alert('ÂõæÁâá‰∏ä‰º†ÊàêÂäüÔºÅ');
                    }
                };

                const uploadVideos = () => {
                    if (selectedVideos.value.length > 0) {
                        selectedVideos.value.forEach(file => {
                            const mediaFile = {
                                id: Date.now() + Math.random(),
                                name: file.name,
                                type: 'video',
                                url: URL.createObjectURL(file)
                            };
                            mediaFiles.push(mediaFile);
                        });
                        selectedVideos.value = [];
                        alert('ËßÜÈ¢ë‰∏ä‰º†ÊàêÂäüÔºÅ');
                    }
                };

                const deleteMediaFile = (fileId) => {
                    if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Êñá‰ª∂ÂêóÔºü')) {
                        const index = mediaFiles.findIndex(f => f.id === fileId);
                        if (index > -1) {
                            mediaFiles.splice(index, 1);
                            alert('Êñá‰ª∂Âà†Èô§ÊàêÂäüÔºÅ');
                        }
                    }
                };

                onMounted(() => {
                    checkLoginStatus();
                });

                return {
                    isLoggedIn,
                    loading,
                    username,
                    activeTab,
                    loginForm,
                    sidebarTabs,
                    knowledgeActiveTab,
                    showAddArticleForm,
                    showAddCourseForm,
                    homepageHalls,
                    knowledgeCategories,
                    articles,
                    newArticle,
                    games,
                    supportContent,
                    courses,
                    newCourse,
                    mediaFiles,
                    selectedImages,
                    selectedVideos,
                    login,
                    quickLogin,
                    logout,
                    saveHallContent,
                    uploadHallIcon,
                    getKnowledgeArticles,
                    addArticle,
                    editArticle,
                    deleteArticle,
                    saveGameContent,
                    uploadGameImage,
                    saveSupportContent,
                    addCourse,
                    editCourse,
                    deleteCourse,
                    selectCourseVideo,
                    selectImages,
                    selectVideos,
                    uploadImages,
                    uploadVideos,
                    deleteMediaFile
                };
            }
        }).mount('#admin-app');
    </script>
</body>
</html>
